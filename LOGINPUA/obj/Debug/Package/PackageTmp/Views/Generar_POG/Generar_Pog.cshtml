
@{
    ViewBag.Title = "Generar_Pog";
    Layout = "~/Views/Shared/_LayoutInicial.cshtml";
 List<ENTIDADES.CC_RUTA_CORREDOR> listRutas = new List<ENTIDADES.CC_RUTA_CORREDOR>();
    listRutas = ViewBag.rutas;
    //
    List<ENTIDADES.CC_MODALIDAD_TRANSPORTE> listModalidades = new List<ENTIDADES.CC_MODALIDAD_TRANSPORTE>();
    listModalidades = ViewBag.modalidadTransporte;
}


<script src="~/Content/js/js_generarPOG/js_Generar_POG.js@("?v="+ DateTime.Now.ToString("yyyyMMddhmmss"))"></script>

 
<style>
    #tooltiprafa {
        display: none;
        z-index: 1;
    }

    .fechadata:hover {
        color: red !important;
    }



    .design-process-section .text-align-center {
        line-height: 25px;
        margin-bottom: 12px;
    }

    .design-process-content {
        border: 1px solid #e9e9e9;
        position: relative;
        padding: 6px 13px 13px 13px;
        height: 100%;
    }

        .design-process-content img {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            max-height: 100%;
        }

        .design-process-content h3 {
            margin-bottom: 16px;
        }

        .design-process-content p {
            line-height: 26px;
            margin-bottom: 12px;
        }

    .process-model {
        list-style: none;
        padding: 0;
        position: relative;
        max-width: 500px;
        border: none;
        z-index: 0;
    }

        .process-model li::after {
            background: #e5e5e5 none repeat scroll 0 0;
            bottom: 0;
            content: "";
            display: block;
            height: 4px;
            margin: 0 auto;
            position: absolute;
            /* right: 14px; */
            left: 21px;
            top: 25px;
            width: 28%;
            z-index: -1;
        }

        .process-model li.visited::after {
            background: #57b87b;
        }

        .process-model li:last-child::after {
            width: 0;
        }

        .process-model li {
            display: inline-block;
            width: 18%;
            text-align: center;
            float: none;
        }

            .nav-tabs.process-model > li.active > a, .nav-tabs.process-model > li.active > a:hover, .nav-tabs.process-model > li.active > a:focus, .process-model li a:hover, .process-model li a:focus {
                border: none;
                background: transparent;
            }

            .process-model li a {
                padding: 0;
                border: none;
                color: #606060;
            }

            .process-model li.active,
            .process-model li.visited {
                color: #57b87b;
            }

                .process-model li.active a,
                .process-model li.active a:hover,
                .process-model li.active a:focus,
                .process-model li.visited a,
                .process-model li.visited a:hover,
                .process-model li.visited a:focus {
                    color: #57b87b;
                }

                .process-model li.active p,
                .process-model li.visited p {
                    font-weight: 600;
                }

            .process-model li span {
                display: block;
                height: 68px;
                width: 68px;
                text-align: center;
                margin: 0 auto;
                background: #f5f6f7;
                border: 2px solid #e5e5e5;
                line-height: 65px;
                font-size: 30px;
                border-radius: 50%;
            }

            .process-model li.active svg, .process-model li.visited span {
                background: #00a39c;
                border-color: #e9ecef;
                color: white;
            }

            .process-model li p {
                font-size: 14px;
                margin-top: 11px;
            }

        .process-model.contact-us-tab li::after {
            display: none;
        }

        .process-model.contact-us-tab li.visited span {
            border-color: #e5e5e5;
        }

    .item-icono-paso {
        color: black;
        font-size: 52px;
        border: 2px solid #e5e5e5;
        border-radius: 50%;
        padding: 13px;
        background-color: #f5f6f7;
    }

    .tab-pane {
        height: 100%;
    }

    .iconocerrar:hover {
        opacity: 1 !important;
        cursor: pointer;
    }

    .tablaFixed:hover .tablaFixed {
        background-color: red;
    }
</style>

<style>
    .tablaFixed {
        width: 100%;
    }

        .tablaFixed thead, .tablaFixed tbody, .tablaFixed tr, .tablaFixed td, .tablaFixed th {
            display: block;
        }

            .tablaFixed tbody tr:after, .tablaFixed thead tr:after {
                content: ' ';
                display: block;
                visibility: hidden;
                clear: both;
            }

        .tablaFixed thead {
            /* fallback */
        }

            .tablaFixed thead th {
                width: 30.1%;
                float: left;
            }

        .tablaFixed tbody td {
            width: 33.1%;
            float: left;
            padding: 0;
            text-align: left;
            padding-left: 14px;
        }

    .sombreaRow {
        background-color: #007bffad !important;
        color: white;
    }
</style>


@*<div class="row">*@
<section class="design-process-section" id="process-tab">
    <div class="row">
        <div style="width:100%">
            <!-- design process steps-->
            <!-- Nav tabs -->
            <br />
            <div style="margin-left: 44%;">
                <ul class="nav nav-tabs process-model more-icon-preocess" id="tabList" role="tablist" style="padding-top: 6px;padding-bottom: 9px;">
                    <li role="presentation" id="uno" class="active" data-toggle="tab">
                        <a href="#pasouno" aria-controls="pasouno" role="tab" data-toggle="tab">
                            <span class="fas fa-chart-line item-icono-paso" title="Obtener data de muestra, quitar data atipicas y procesar gráfico."></span>
                        </a>
                    </li>
                    <li role="presentation" id="dos" data-toggle="tab">
                        <a href="#pasodos" onclick="Listarvalida_filtro_franjas()" aria-controls="pasodos" role="tab" data-toggle="tab">
                            <span class="fas fa-table item-icono-paso" aria-hidden="true" title="definir franjas horarias con las que hay que trabajar."></span>
                        </a>
                    </li>
                     
                </ul>
            </div>
            <!-- end design process steps-->
            <!-- Tab panes -->
            <div id="tabContenido" class="tab-content modal-body">





                <div role="tabpanel" class="tab-pane active" id="pasouno">

                    <div class="design-process-content ">

                        <iframe id="intervalo_viaje" src="http://localhost:53183/Pasajero_ValidacionDet/Calcular_Intervalos" style="width:100%" height="500" title="Iframe Example"></iframe>
                        <br /><br /><br /> <br /><br />

                        <iframe id="intervalo_viaje" src="http://localhost:53183/AnalisisTiempoViaje/ReporteViajes" style="width:100%" height="500" title="Iframe Example"></iframe>

                        @*<iframe src="demo_iframe.htm" height="200" width="300" title="Iframe Example"></iframe>*@

                        @*<a href="" id="btnAgregarFranja" onclick="limpiarGrafico($(this));" class="btn btn-info btn-sm disabled" title="Agregar Franja" style="margin-bottom: 6px;background-color: #28a745;border-color: #e5e5e5;" data-toggle="modal"><span class="fa fa-i-cursor"></span></a>*@
                    </div>
                </div>





                @*SEGUNDO*@

                <div role="tabpanel" class="tab-pane" id="pasodos">
                    <div class="design-process-content">



                        <div id="contentParametros" style="padding-bottom: 14px;">
                            <div class="modal-body">
                                <div class="row">


                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="Corredor"><strong>Corredor</strong> </label>

                                            <div class="input-group mb-3">

                                                <div class="input-group-prepend">
                                                    <span class="input-group-text" title="Corredor"><span class="far fa-hospital" aria-hidden="true"></span></span>
                                                </div>
                                                <select class="form-control form-control-sm" id="selectCorredores_dos" onchange="getRutaPorCorredor_dos();"></select>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="selectTipoDia"><strong>Ruta</strong> </label>

                                            <div class="input-group mb-3">

                                                <div class="input-group-prepend">
                                                    <span class="input-group-text" title="Ruta"><span class="fas fa-road" aria-hidden="true"></span></span>
                                                </div>
                                                <select class="form-control form-control-sm" id="selectRuta_dos"></select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-2">

                                        <div class="form-group">
                                            <label for="selectTipoDia"><strong>Tipo Día</strong> </label>
                                            <select onchange="verificarTipoDia($(this));" class="form-control form-control-sm" id="selectTipoDia">
                                                <option value="1">Habil</option>
                                                <option value="2">Sábado</option>
                                                <option value="3">Domingo</option>
                                                <option value="4">Feriado</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-md-2">


                                        <div class="form-group">
                                            <label><strong>Seleccionar Día(s)</strong> </label>
                                            <input type="text" style="font-size:13px;" class="form-control form-control-sm" value="" placeholder="Seleccionar Fecha(s)" id="txtDiasSeleccionados" readonly>
                                        </div>
                                    </div>

                                    <div class="col-md-1"> </div>
                                    <div class="col-md-1">
                                        <br />
                                        <a href="#" id="Guardar_tabla" style="margin-top: 8px;"  onclick="RegistraMaestroPog(0,0)" class="btn btn-success btn-sm" data-toggle="modal">Guardar tabla</a>

                                    </div>


                                </div>
                            </div>

                            @*TABLE*@

                            <div class="modal-body">
                                <div class="table-responsive">
                                    <table class="text-center responsive-table" id="tbtable_POG" style="width:100%">
                                        <thead>
                                            <tr>

                                                <th scope="col" colspan="2">FRANJA HORARIA</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;">CANTIDAD DE BUSES</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;">CANTIDAD BUSES N-S</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;">CANTIDAD BUSES S-N</th>
                                                <th scope="col" colspan="2">TIEMPO VIAJE PROM</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;">TIEMPO CICLO TOTAL</th>
                                                <th scope="col" colspan="2">INTERVALO</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;">INTERVALO PROMEDIO</th>


                                                <th scope="col" colspan="2" style="vertical-align:middle;">VELOCIDAD PROMEDIO</th>
                                                <th scope="col" colspan="2"> DISTANCIA  KILOMETRO</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;"> KM TOTAL</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;">VELOCIDAD OPERACIONAL</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;">#CICLO</th>
                                                <th scope="col" rowspan="2" style="vertical-align:middle;">KM POR CICLOS</th>


                                            </tr>

                                            <tr>
                                                <th class="text-center">HI</th>
                                                <th class="text-center">HF</th>
                                                <th class="text-center">N-S</th>
                                                <th class="text-center">S-N</th>
                                                <th class="text-center">N-S</th>
                                                <th class="text-center">S-N</th>
                                                <th class="text-center">CANTA N-S</th>
                                                <th class="text-center">ALIPIO S-N</th>
                                                <th class="text-center">N-S</th>
                                                <th class="text-center">S-N</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                             
                                        </tbody>
                                    </table>
                                </div>
                            </div>





                        </div>


                    </div>
                </div>

                @*TERCERO*@
  

            </div>
        </div>
    </div>
</section>
@*</div>*@


<script>
    var URL_GET_RUTA_X_CORREDOR = "@Url.Action("getRutaxCorredor", "Programacion")";
    var URL_GET_TIPO_DIAS = "@Url.Action("getTipoDias", "Programacion")";
    var URL_LISTAR_POG = "@Url.Action("Listar_Franja_POG", "Generar_POG")";
    var URL_GUARDAR_MAESTRO_POG = "@Url.Action("registrar_Maestro_POG", "Generar_POG")";
    var URL_GUARDAR_DETALLE_POG = "@Url.Action("Registrar_Detalle_POG", "Generar_POG")";

    
    



    @{ HtmlString dataCorredores = new HtmlString(ViewBag.corredores); }
    var JSON_DATA_CORREDORES = JSON.parse('@dataCorredores');


    function getCorredoresByModalidad() {

        var modalidadTransporteSelecionado = $('#mod').val();
        $('#selectCorredores, #selectRuta').empty();
        var cantidadRegistros = 0;

        $.each(JSON_DATA_CORREDORES, function () {
            if (this.ID_MODALIDAD_TRANS == Number(modalidadTransporteSelecionado)) {
                cantidadRegistros++;
                $('#selectCorredores').append('<option value="' + this.ID_CORREDOR + '">' + this.ABREVIATURA + '</option>');
                $('#selectCorredores_dos').append('<option value="' + this.ID_CORREDOR + '">' + this.ABREVIATURA + '</option>');

            }
        });
        if (cantidadRegistros == 0) {
            $('#selectCorredores, #selectRuta').append('<option value="0">' + '-- No hay información --' + '</option>');
            $('#tbRutatipoServicio tbody').empty();
            return false
        }
        //$('#selectCorredores').val(4); //DURACEL PARA PRUEBAS EN CORREDOR
         getRutaPorCorredor_dos();
    }

</script>