
@{
    ViewBag.Title = "ReporteViajes";
    Layout = "~/Views/Shared/_LayoutInicial.cshtml";
    //Layout = "~/Views/Shared/_Layout_corredores_Supervisor.cshtml";
}

<script src="~/Content/js/js_analisis_tiempo_viaje/js_reporteViaje.js"></script>

<style>
    .modal-dialog {
        max-width: max-content !important;
    }

    .modal-content input {
        width: 413px;
    }

    .row{
        margin-left: 0px !important;
        margin-right: 0px !important;
    }

    /*.sombraContenedor {
        background-color: white;
        box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
    }

    .modal-content input {
        width: auto !important;
    }

    .thead-azul-claro th {
        color: white;
        background-color: #2f6f9dd9;
        border-color: #777;
    }

    a {
        color: white !important;
    }

    .dropdown-item {
        color: black !important;
    }*/
</style>

@{
    List<ENTIDADES.CC_RUTA_CORREDOR> listRutas = new List<ENTIDADES.CC_RUTA_CORREDOR>();
    listRutas = ViewBag.rutas;
}
<br />
<div class="row">
    <div class="col-md-12 text-center">
        <h4>
            REPORTE DE VIAJES&nbsp;&nbsp;&nbsp;
        </h4>
    </div>
</div>

<div class="row" style="padding-bottom:16px;">

    <div class="col-md-2">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" title="Corredor"><span class="far fa-hospital" aria-hidden="true"></span></span>
            </div>
            <select class="form-control form-control-sm" id="selectCorredores" onchange="getRutaPorCorredor();"></select>
        </div>
    </div>

    <div class="col-md-2">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" title="Ruta"><span class="fas fa-road" aria-hidden="true"></span></span>
            </div>
            <select class="form-control form-control-sm" onchange="cambioDeRuta();" id="selectRutas">
                @*@foreach (var item in listRutas)
                {
                    <option value="@item.ID_RUTA">@item.ABREV_CORREDOR   @item.NRO_RUTA</option>
                }*@
            </select>
        </div>
    </div>

    <div class="col-md-3">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1"><span class="fa fa-calendar"></span></span>
            </div>
            <input type="text" id="txtFechaConsulta" value="01/01/2019 - 03/01/2019" class="form-control form-control-sm" aria-label="Username" aria-describedby="basic-addon1">
        </div>
        @*<select class="form-control form-control-sm" id="selectCorredores" hidden>
            @foreach (var item in Model)
            {
                <option value="@item.ID_CORREDOR">@item.ABREVIATURA</option>
            }
        </select>*@
    </div>

    <div class="col-md-2">
        <div class="input-group mb-2">
            <div class="input-group-prepend">
                <span class="input-group-text" title="Salto de horas consulta" id="basic-addon1"><svg class="svg-inline--fa fa-clock fa-w-16" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="clock" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm57.1 350.1L224.9 294c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v137.7l63.5 46.2c5.4 3.9 6.5 11.4 2.6 16.8l-28.2 38.8c-3.9 5.3-11.4 6.5-16.8 2.6z"></path></svg><!-- <span class="fas fa-clock" aria-hidden="true"></span> --></span>
            </div>
            <select class="form-control form-control-sm" id="selectHoraSalto">
                @*<option value="15">15 Minutos</option>
                <option value="30">30 Minutos</option>*@
                <option value="60" selected="">1 Hora</option>
                @*<option value="120">2 Horas</option>*@
            </select>
        </div>
    </div>

    <div class="col-md-1" style="display: contents;">
        <a href="#" id="consultar" class="btn btn-info btn-sm" data-toggle="modal" onclick="getViajesPorRuta();">Consultar</a>
    </div>
    <div class="col-md-1 text-right">
        @*<a href="" id="exportar" class="btn btn-success btn-sm" data-toggle="modal" onclick="exportarTabla();">Exportar</a>*@
    </div>

</div>

<div class="row">
    <div class="col-md-2">
        <div class="input-group mb-2">
            <div class="input-group-prepend">
                <span class="input-group-text" title="Lado"><span class="fas fa-project-diagram" aria-hidden="true"></span></span>
            </div>
            <select class="form-control form-control-sm" id="selectLado" onchange="getParaderosxRuta($('#selectRutas').val())">
                <option value="A">A</option>
                <option value="B">B</option>
            </select>
        </div>
    </div>

    <div class="col-md-2">
        <div class="input-group mb-2">
            <div class="input-group-prepend">
                <span class="input-group-text" title="Paradero inicial"><span class="fab fa-product-hunt" aria-hidden="true"></span></span>
            </div>
            <select class="form-control form-control-sm" id="selectParaderoIni"></select>
        </div>
    </div>

    <div class="col-md-2">
        <div class="input-group mb-2">
            <div class="input-group-prepend">
                <span class="input-group-text" title="Paradero final"><span class="fab fa-product-hunt" aria-hidden="true"></span></span>
            </div>
            <select class="form-control form-control-sm" id="selectParaderoFin"></select>
        </div>
    </div>
</div>
<hr />
<div class="row">
    <div id="total_result" class="table-responsive">
        <table class="responsive-table" id="tbViajesPromediados" style="width:100%">
            <thead class="thead-azul-claro text-center">
                <tr>
                    <th></th>
                    <th class="text-center">04:00 </th>
                    <th class="text-center">05:00 </th>
                    <th class="text-center">06:00 </th>
                    <th class="text-center">07:00 </th>
                    <th class="text-center">08:00 </th>
                    <th class="text-center">09:00 </th>
                    <th class="text-center">10:00 </th>
                    <th class="text-center">11:00 </th>
                    <th class="text-center">12:00 </th>
                    <th class="text-center">13:00 </th>
                    <th class="text-center">14:00 </th>
                    <th class="text-center">15:00 </th>
                    <th class="text-center">16:00 </th>
                    <th class="text-center">17:00 </th>
                    <th class="text-center">18:00 </th>
                    <th class="text-center">19:00 </th>
                    <th class="text-center">20:00 </th>
                    <th class="text-center">21:00 </th>
                    <th class="text-center">22:00 </th>
                    <th class="text-center">23:00 </th>
                    @*<th rowspan="2" style="vertical-align:middle;">FECHA</th>
                    <th rowspan="2" style="vertical-align:middle;">CORREDOR</th>
                    <th rowspan="2" class="text-center" style="vertical-align:middle;">RUTA</th>
                    <th colspan="2" class="text-center">HORA</th>
                    <th colspan="1" class="text-center">DISTANCIA</th>
                    <th colspan="1" class="text-center">VELOCIDAD PROM</th>
                    <th colspan="1" class="text-center">TIEMPO PROM</th>
                </tr>
                
                <tr>
                    <th class="text-center">INI</th>
                    <th class="text-center">FIN</th>
                    <th class="text-center texto-sentido">AB</th>
                    <th class="text-center texto-sentido">AB</th>
                    <th class="text-center texto-sentido">AB</th>*@
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="21" class="text-center">Presionar el boton Consultar para obtener la información.</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="~/Content/dataPruebas/viajesCorredores.js"></script>


<script>
    var fechaConsultaTimestamp = '10/09/2019';//fecha temp para calculos del timestamp
    var HORA_OPERACIONES = {
        inicio: '04:00:00',
        fin: '23:59:00'
    };
    //
    var PROMEDIADO_COMPARATIVO = {
        A: [],
        B: []
        //COMPARATIVO_A: {
        //    A: [],
        //    B: []
        //},
        //COMPARATIVO_B: {
        //    A: [],
        //    B: []
        //}
    }

    var DATA_VIAJES = {
        TURNO: {
            MAÑANA: {
                arr: [],
                minimo: null,
                maximo: null
            },
            TARDE: {
                arr: [],
                minimo: null,
                maximo: null
            }
        }
    };

    var util = new Util();
    var FECHA_HOY = '@DateTime.Now.ToString("dd/MM/yyyy")';
    @{ HtmlString dataCorredores = new HtmlString(ViewBag.corredores); }
    var JSON_DATA_CORREDORES = JSON.parse('@dataCorredores');
    var URL_GET_RUTA_X_CORREDOR = "@Url.Action("getRutaxCorredor", "Programacion")";
    var URL_GET_PARADEROS_BY_RUTA = "@Url.Action("getParaderosByIdRuta", "Salida")";
    var URL_GET_VIAJES_X_RUTA = "@Url.Action("getViajesPorRuta", "AnalisisTiempoViaje")";
    var URL_ACTUALIZAR_PROM_TEMP = "@Url.Action("actualizarPromTemp", "AnalisisTiempoViaje")";
</script>
